CrÃ©er une API REST avec MongoDB et Express nÃ©cessite une structure de projet bien organisÃ©e pour la maintenabilitÃ© et la lisibilitÃ©. Voici une structure de rÃ©pertoire simple mais efficace pour un projetâ€¯:

---

### **Structure de rÃ©pertoire**

```
project/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ database.js      # Configuration de la base de donnÃ©es MongoDB
â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”œâ”€â”€ userController.js  # Logique mÃ©tier des utilisateurs
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ userModel.js       # ModÃ¨le MongoDB pour les utilisateurs
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ userRoutes.js      # Routes pour les utilisateurs
â”‚   â”œâ”€â”€ middlewares/
â”‚   â”‚   â””â”€â”€ logger.js          # Exemple de middleware personnalisÃ©
â”‚   â”œâ”€â”€ app.js                 # Configuration de l'application Express
â”‚   â””â”€â”€ index.js               # Point d'entrÃ©e principal
â”œâ”€â”€ package.json               # DÃ©pendances et scripts
â”œâ”€â”€ .env                       # Variables d'environnement (MongoDB URI, etc.)
â””â”€â”€ README.md                  # Documentation
```

---

### **Ã‰tape 1 : Configuration de la base de donnÃ©es**
**Fichier : `src/config/database.js`**

```javascript
const mongoose = require('mongoose');

// Connexion Ã  MongoDB
const connectDB = async () => {
  try {
    await mongoose.connect(process.env.MONGO_URI, {
      useNewUrlParser: true,
      useUnifiedTopology: true,
    });
    console.log('MongoDB connected successfully!');
  } catch (err) {
    console.error('MongoDB connection failed:', err.message);
    process.exit(1); // ArrÃªte le serveur en cas d'erreur
  }
};

module.exports = connectDB;
```

---

### **Ã‰tape 2 : ModÃ¨le Mongoose**
**Fichier : `src/models/userModel.js`**

```javascript
const mongoose = require('mongoose');

const userSchema = new mongoose.Schema({
  name: {
    type: String,
    required: true,
  },
  email: {
    type: String,
    required: true,
    unique: true,
  },
  password: {
    type: String,
    required: true,
  },
}, { timestamps: true }); // Ajoute automatiquement createdAt et updatedAt

module.exports = mongoose.model('User', userSchema);
```

---

### **Ã‰tape 3 : Logique mÃ©tier**
**Fichier : `src/controllers/userController.js`**

```javascript
const User = require('../models/userModel');

// Obtenir tous les utilisateurs
const getUsers = async (req, res) => {
  try {
    const users = await User.find();
    res.status(200).json(users);
  } catch (err) {
    res.status(500).json({ message: err.message });
  }
};

// CrÃ©er un nouvel utilisateur
const createUser = async (req, res) => {
  const { name, email, password } = req.body;
  try {
    const newUser = new User({ name, email, password });
    await newUser.save();
    // ou utiliser await User.create(req.body);
    res.status(201).json(newUser);
  } catch (err) {
    res.status(400).json({ message: err.message });
  }
};

module.exports = {
  getUsers,
  createUser,
};
```

---

### **Ã‰tape 4 : DÃ©finir les routes**
**Fichier : `src/routes/userRoutes.js`**

```javascript
const express = require('express');
const { getUsers, createUser } = require('../controllers/userController');

const router = express.Router();

// Routes CRUD pour les utilisateurs
router.get('/', getUsers);     // Obtenir tous les utilisateurs
router.post('/', createUser);  // Ajouter un nouvel utilisateur

module.exports = router;
```

---

### **Ã‰tape 5 : Configuration Express**
**Fichier : `src/app.js`**

```javascript
const express = require('express');
const bodyParser = require('body-parser');
const userRoutes = require('./routes/userRoutes');

const app = express();

// Middlewares
app.use(bodyParser.json()); // Analyse les requÃªtes JSON

// Routes principales
app.use('/api/users', userRoutes);

// Middleware de base pour gÃ©rer les erreurs 404
app.use((req, res, next) => {
  res.status(404).json({ message: 'Route not found' });
});

module.exports = app;
```

---

### **Ã‰tape 6 : Point dâ€™entrÃ©e**
**Fichier : `src/index.js`**

```javascript
const dotenv = require('dotenv');
const app = require('./app');
const connectDB = require('./config/database');

// Charger les variables d'environnement
dotenv.config();

// Connecter la base de donnÃ©es
connectDB();

// Lancer le serveur
const PORT = process.env.PORT || 3000;
app.listen(PORT, () => {
  console.log(`Server running on http://localhost:${PORT}`);
});
```

---

### **Ã‰tape 7 : Variables d'environnement**
**Fichier : `.env`**

```
PORT=3000
MONGO_URI=mongodb+srv://<username>:<password>@cluster0.mongodb.net/mydatabase
```

---

### **Ã‰tape 8 : Installation des dÃ©pendances**
**Commandes :**

```bash
npm init -y
npm install express mongoose dotenv body-parser
```

---

### **Ã‰tape 9 : Lancer lâ€™API**
1. Assure-toi que **MongoDB** est configurÃ© (MongoDB Atlas ou localement).
2. DÃ©marre le serveur avec :

```bash
node src/index.js
```

3. Teste les endpoints avec Postman ou Swagger (`/api/users`).

---

### **Endpoint CRUD gÃ©nÃ©rÃ© :**

| **MÃ©thode** | **Route**         | **Description**            |
|-------------|-------------------|----------------------------|
| GET         | `/api/users`      | Obtenir tous les utilisateurs |
| POST        | `/api/users`      | Ajouter un nouvel utilisateur |

---

Avec cette structure, ton projet reste propre, maintenable et extensibleâ€¯! ðŸš€